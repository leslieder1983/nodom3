{"code":"import { NCache } from \"./cache\";\r\n/**\r\n * 全局缓存\r\n */\r\nexport class GlobalCache {\r\n    /**\r\n         * 保存到cache\r\n         * @param key       键，支持\".\"\r\n         * @param value     值\r\n         */\r\n    static set(key, value) {\r\n        this.cache.set(key, value);\r\n    }\r\n    /**\r\n     * 从cache读取\r\n     * @param key   键，支持\".\"\r\n     * @returns     缓存的值或undefined\r\n     */\r\n    static get(key) {\r\n        return this.cache.get(key);\r\n    }\r\n    /**\r\n     * 从cache移除\r\n     * @param key   键，支持\".\"\r\n     */\r\n    static remove(key) {\r\n        this.cache.remove(key);\r\n    }\r\n    /**\r\n     * 获取指令实例\r\n     * @param module    模块\r\n     * @param id        指令id\r\n     * @returns         指令对象\r\n     */\r\n    static getDirective(id) {\r\n        return this.cache.get('$directives.' + id + '.$instance');\r\n    }\r\n    /**\r\n     * 保存指令实例\r\n     * @param module        模块\r\n     * @param directive     指令对象\r\n     */\r\n    static saveDirective(directive) {\r\n        this.cache.set('$directives.' + directive.id + '.$instance', directive);\r\n    }\r\n    /**\r\n     * 移除指令\r\n     * @param id    指令id\r\n     */\r\n    static removeDirective(id) {\r\n        this.cache.remove('$directives.' + id);\r\n    }\r\n    /**\r\n     * 设置指令参数\r\n     * @param id        指令id\r\n     * @param key       dom key\r\n     * @param name      参数名\r\n     * @param value     参数值\r\n     */\r\n    static setDirectiveParam(id, key, name, value) {\r\n        this.cache.set('$doms.' + key + '$directives.' + id + '.$params.' + name, value);\r\n    }\r\n    /**\r\n     * 获取指令参数值\r\n     * @param id        指令id\r\n     * @param key       dom key\r\n     * @param name      参数名\r\n     * @returns         参数值\r\n     */\r\n    static getDirectiveParam(id, key, name) {\r\n        return this.cache.get('$doms.' + key + '$directives.' + id + '.$params.' + name);\r\n    }\r\n    /**\r\n     * 移除指令参数\r\n     * @param id        指令id\r\n     * @param key       dom key\r\n     * @param name      参数名\r\n     */\r\n    static removeDirectiveParam(id, key, name) {\r\n        this.cache.remove('$doms.' + key + '$directives.' + id + '.$params.' + name);\r\n    }\r\n    /**\r\n     * 清空指令参数\r\n     * @param id        指令id\r\n     * @param key       dom key\r\n     */\r\n    static clearDirectiveParam(id, key) {\r\n        this.cache.remove('$doms.' + key + '$directives.' + id + '.$params.' + name);\r\n    }\r\n    /**\r\n     * 获取表达式实例\r\n     * @param id        表达式id\r\n     * @returns         表达式对象\r\n     */\r\n    static getExpression(id) {\r\n        return this.cache.get('$expressions.' + id);\r\n    }\r\n    /**\r\n     * 保存表达式实例\r\n     * @param expression    表达式对象\r\n     */\r\n    static saveExpression(expression) {\r\n        this.cache.set('$expressions.' + expression.id, expression);\r\n    }\r\n    /**\r\n     * 移除表达式\r\n     * @param id    表达式id\r\n     */\r\n    static removeExpression(id) {\r\n        this.cache.remove('$expressions.' + id);\r\n    }\r\n    /**\r\n     * 获取事件实例\r\n     * @param id        表达式id\r\n     * @returns         事件对象\r\n     */\r\n    static getEvent(id) {\r\n        return this.cache.get('$events.' + id + '.$instance');\r\n    }\r\n    /**\r\n     * 保存事件实例\r\n     * @param event     事件对象\r\n     */\r\n    static saveEvent(event) {\r\n        this.cache.set('$events.' + event.id + '.$instance', event);\r\n    }\r\n    /**\r\n     * 移除事件\r\n     * @param id    事件id\r\n     */\r\n    static removeEvent(id) {\r\n        this.cache.remove('$events.' + id);\r\n    }\r\n    /**\r\n     * 设置事件参数\r\n     * @param id        事件id\r\n     * @param key       dom key\r\n     * @param name      参数名\r\n     * @param value     参数值\r\n     */\r\n    static setEventParam(id, key, name, value) {\r\n        this.cache.set('$doms.' + key + '$events.' + id + '.$params.' + name, value);\r\n    }\r\n    /**\r\n     * 获取事件参数值\r\n     * @param id        事件id\r\n     * @param key       dom key\r\n     * @param name      参数名\r\n     * @returns         参数值\r\n     */\r\n    static getEventParam(id, key, name) {\r\n        return this.cache.get('$doms.' + key + '$events.' + id + '.$params.' + name);\r\n    }\r\n    /**\r\n     * 移除事件参数\r\n     * @param id        事件id\r\n     * @param key       dom key\r\n     * @param name      参数名\r\n     */\r\n    static removeEventParam(id, key, name) {\r\n        this.cache.remove('$doms.' + key + '$events.' + id + '.$params.' + name);\r\n    }\r\n    /**\r\n     * 清空事件参数\r\n     * @param id        事件id\r\n     * @param key       dom key\r\n     */\r\n    static clearEventParam(id, key) {\r\n        this.cache.remove('$doms.' + key + '$events.' + id + '.$params');\r\n    }\r\n    /**\r\n     * 保存旧虚拟dom\r\n     * @param dom       dom对象\r\n     */\r\n    static saveElement(dom) {\r\n        this.cache.set('$doms.' + dom.key, dom);\r\n    }\r\n    /**\r\n     * 获取渲染树虚拟dom\r\n     * @param key       dom key\r\n     * @returns         dom对象\r\n     */\r\n    static getElement(key) {\r\n        return this.cache.get('$doms.' + key);\r\n    }\r\n    /**\r\n     * 删除渲染树虚拟dom\r\n     * @param key       虚拟dom key\r\n     */\r\n    static removeElement(key) {\r\n        this.cache.remove('$doms.' + key);\r\n    }\r\n    /**\r\n     * 获取key对应的html节点\r\n     * @param key       el key\r\n     * @returns         html element\r\n     */\r\n    static getNode(key) {\r\n        return this.cache.get('$doms.' + key + '.$el');\r\n    }\r\n    /**\r\n     * 保存key对应的html node\r\n     * @param key       dom key\r\n     * @param node      node\r\n     */\r\n    static saveNode(key, node) {\r\n        this.cache.set('$doms.' + key + '.$el', node);\r\n    }\r\n    /**\r\n     * 移除保存的节点（包括参数和html dom）\r\n     * @param key   dom key\r\n     */\r\n    static removeSavedNode(key) {\r\n        this.cache.remove('$doms.' + key);\r\n    }\r\n    /**\r\n     * 设置dom参数值\r\n     * @param key       dom key\r\n     * @param name       参数名\r\n     * @param value     参数值\r\n     */\r\n    static setElementParam(key, name, value) {\r\n        this.cache.set('$doms.' + key + '.$params.' + name, value);\r\n    }\r\n    /**\r\n     * 获取dom参数值\r\n     * @param key       dom key\r\n     * @param name      参数名\r\n     * @returns         参数值\r\n     */\r\n    static getElementParam(key, name) {\r\n        return this.cache.get('$doms.' + key + '.$params.' + name);\r\n    }\r\n    /**\r\n     * 移除dom参数\r\n     * @param key       dom key\r\n     * @param name      参数名\r\n     */\r\n    static removeElementParam(key, name) {\r\n        this.cache.remove('$doms.' + key + '.$params.' + name);\r\n    }\r\n    /**\r\n     * 清除element 参数集\r\n     * @param key   dom key\r\n     */\r\n    static clearElementParams(key) {\r\n        this.cache.remove('$doms.' + key + '.$params');\r\n    }\r\n    /**\r\n     * 清除指令集\r\n     */\r\n    static clearDirectives() {\r\n        this.remove('$directives');\r\n    }\r\n    /**\r\n     * 清除表达式集\r\n     */\r\n    static clearExpressions() {\r\n        this.remove('$directives');\r\n    }\r\n    /**\r\n     * 清除事件集\r\n     */\r\n    static clearEvents() {\r\n        this.remove('$directives');\r\n    }\r\n    /**\r\n     * 清除缓存dom对象\r\n     */\r\n    static clearSaveDoms() {\r\n        this.remove('$doms');\r\n    }\r\n}\r\nGlobalCache.cache = new NCache();\r\n//# sourceMappingURL=globalcache.js.map","references":["D:/User_zhao/gitRepository/competition/nodom/core/cache.ts","D:/User_zhao/gitRepository/competition/nodom/core/directive.ts","D:/User_zhao/gitRepository/competition/nodom/core/event.ts","D:/User_zhao/gitRepository/competition/nodom/core/virtualdom.ts","D:/User_zhao/gitRepository/competition/nodom/core/expression.ts"],"map":"{\"version\":3,\"file\":\"globalcache.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../core/globalcache.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAC;AAMjC;;GAEG;AACH,MAAM,OAAO,WAAW;IAGpB;;;;WAIO;IACA,MAAM,CAAC,GAAG,CAAC,GAAU,EAAC,KAAS;QAClC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAC,KAAK,CAAC,CAAC;IAC9B,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,GAAG,CAAC,GAAG;QACjB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,MAAM,CAAC,GAAG;QACpB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,YAAY,CAAC,EAAS;QAChC,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,cAAc,GAAG,EAAE,GAAG,YAAY,CAAC,CAAC;IAC9D,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,aAAa,CAAC,SAAmB;QAC3C,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,cAAc,GAAG,SAAS,CAAC,EAAE,GAAG,YAAY,EAAC,SAAS,CAAC,CAAC;IAC3E,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,eAAe,CAAC,EAAS;QACnC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,cAAc,GAAG,EAAE,CAAC,CAAC;IAC3C,CAAC;IAED;;;;;;OAMG;IACI,MAAM,CAAC,iBAAiB,CAAC,EAAS,EAAC,GAAU,EAAC,IAAW,EAAC,KAAS;QACtE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,cAAc,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,EAAC,KAAK,CAAC,CAAC;IACpF,CAAC;IAED;;;;;;OAMG;IACI,MAAM,CAAC,iBAAiB,CAAC,EAAS,EAAC,GAAU,EAAC,IAAW;QAC5D,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,cAAc,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC,CAAC;IACrF,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,oBAAoB,CAAC,EAAS,EAAC,GAAU,EAAC,IAAW;QAC/D,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,GAAG,cAAc,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC,CAAC;IACjF,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,mBAAmB,CAAC,EAAS,EAAC,GAAU;QAClD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,GAAG,cAAc,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC,CAAC;IACjF,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,aAAa,CAAC,EAAS;QACjC,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,eAAe,GAAG,EAAE,CAAC,CAAC;IAChD,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,cAAc,CAAC,UAAqB;QAC9C,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,eAAe,GAAG,UAAU,CAAC,EAAE,EAAC,UAAU,CAAC,CAAC;IAC/D,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,gBAAgB,CAAC,EAAS;QACpC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,eAAe,GAAG,EAAE,CAAC,CAAC;IAC5C,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,QAAQ,CAAC,EAAS;QAC5B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG,YAAY,CAAC,CAAC;IAC1D,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,SAAS,CAAC,KAAY;QAChC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,GAAG,KAAK,CAAC,EAAE,GAAG,YAAY,EAAC,KAAK,CAAC,CAAC;IAC/D,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,WAAW,CAAC,EAAS;QAC/B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,CAAC;IACvC,CAAC;IAED;;;;;;OAMG;IACI,MAAM,CAAC,aAAa,CAAC,EAAS,EAAC,GAAU,EAAC,IAAW,EAAC,KAAS;QAClE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,UAAU,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,EAAC,KAAK,CAAC,CAAC;IAChF,CAAC;IAED;;;;;;OAMG;IACI,MAAM,CAAC,aAAa,CAAC,EAAS,EAAC,GAAU,EAAC,IAAW;QACxD,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,UAAU,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC,CAAC;IACjF,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,gBAAgB,CAAC,EAAS,EAAC,GAAU,EAAC,IAAW;QAC3D,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,GAAG,UAAU,GAAG,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC,CAAC;IAC7E,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,eAAe,CAAC,EAAS,EAAC,GAAU;QAC9C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,GAAG,UAAU,GAAG,EAAE,GAAG,UAAU,CAAC,CAAC;IACrE,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,WAAW,CAAC,GAAc;QACpC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC;IAC3C,CAAC;IACD;;;;OAIG;IACI,MAAM,CAAC,UAAU,CAAC,GAAU;QAC/B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;IAC1C,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,aAAa,CAAC,GAAU;QAClC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;IACtC,CAAC;IAGD;;;;OAIG;IACI,MAAM,CAAC,OAAO,CAAC,GAAW;QAC7B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,MAAM,CAAC,CAAC;IACnD,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,QAAQ,CAAC,GAAU,EAAC,IAAS;QACvC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,MAAM,EAAC,IAAI,CAAC,CAAC;IACjD,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,eAAe,CAAC,GAAU;QACpC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;IACtC,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,eAAe,CAAC,GAAU,EAAC,IAAW,EAAC,KAAS;QAC1D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,WAAW,GAAG,IAAI,EAAE,KAAK,CAAC,CAAC;IAC/D,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,eAAe,CAAC,GAAU,EAAC,IAAW;QAChD,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,GAAG,WAAW,GAAG,IAAI,CAAC,CAAC;IAC/D,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,kBAAkB,CAAC,GAAU,EAAC,IAAW;QACnD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,GAAG,WAAW,GAAG,IAAI,CAAC,CAAC;IAC3D,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,kBAAkB,CAAC,GAAU;QACvC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,GAAG,UAAU,CAAC,CAAC;IACnD,CAAC;IAED;;OAEG;IACI,MAAM,CAAC,eAAe;QACzB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;IAC/B,CAAC;IAED;;OAEG;IACI,MAAM,CAAC,gBAAgB;QAC1B,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;IAC/B,CAAC;IAED;;OAEG;IACI,MAAM,CAAC,WAAW;QACrB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;IAC/B,CAAC;IAED;;OAEG;IACI,MAAM,CAAC,aAAa;QACvB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACzB,CAAC;;AA7Sc,iBAAK,GAAU,IAAI,MAAM,EAAE,CAAC\"}"}
