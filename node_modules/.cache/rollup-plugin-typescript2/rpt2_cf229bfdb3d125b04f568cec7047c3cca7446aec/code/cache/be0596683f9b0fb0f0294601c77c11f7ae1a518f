{"code":"import { ModuleFactory } from \"./modulefactory\";\r\nimport { VirtualDom } from \"./virtualdom\";\r\nimport { Expression } from \"./expression\";\r\nimport { CssManager } from \"./cssmanager\";\r\nimport { EventManager } from \"./eventmanager\";\r\n/**\r\n * 渲染器\r\n */\r\nexport class Renderer {\r\n    /**\r\n     * 添加到渲染列表\r\n     * @param module 模块\r\n     */\r\n    static add(module) {\r\n        //如果已经在列表中，不再添加\r\n        if (!module.dontAddToRender && !this.waitList.includes(module.id)) {\r\n            //计算优先级\r\n            this.waitList.push(module.id);\r\n        }\r\n    }\r\n    /**\r\n     * 队列渲染\r\n     */\r\n    static render() {\r\n        for (; this.waitList.length > 0;) {\r\n            ModuleFactory.get(this.waitList.shift()).render();\r\n        }\r\n    }\r\n    /**\r\n     * 渲染dom\r\n     * @param module            模块\r\n     * @param src               源dom\r\n     * @param model             模型，如果src已经带有model，则此参数无效\r\n     * @param parent            父dom\r\n     * @param key               key\r\n     * @returns\r\n     */\r\n    static renderDom(module, src, model, parent, key) {\r\n        //节点自带model优先级高\r\n        model = src.model ? src.model : model;\r\n        let dst = new VirtualDom(src.tagName, key ? src.key + '_' + key : src.key);\r\n        //设置当前根root\r\n        if (!parent) {\r\n            this.currentModuleRoot = dst;\r\n        }\r\n        if (src.staticNum > 0) {\r\n            src.staticNum--;\r\n        }\r\n        dst.model = model;\r\n        dst.subModuleId = src.subModuleId;\r\n        // 设置父对象\r\n        if (parent) {\r\n            dst.parent = parent;\r\n        }\r\n        //先处理model指令\r\n        if (src.directives && src.directives.length > 0 && src.directives[0].type.name === 'model') {\r\n            src.directives[0].exec(module, dst, src);\r\n        }\r\n        if (src.tagName) {\r\n            if (!dst.notChange) {\r\n                handleProps();\r\n                let r = handleDirectives();\r\n                if (!r) {\r\n                    return;\r\n                }\r\n                //处理style，如果为style，则不处理assets和events\r\n                if (!CssManager.handleStyleDom(module, src, Renderer.currentModuleRoot, src.getProp('scope') === 'this')) {\r\n                    //assets\r\n                    if (src.assets && src.assets.size > 0) {\r\n                        for (let p of src.assets) {\r\n                            dst.setAsset(p[0], p[1]);\r\n                        }\r\n                    }\r\n                    //事件\r\n                    if (src.events && src.events.size > 0) {\r\n                        for (let p of src.events) {\r\n                            //复制数组\r\n                            dst.setEvent(p[0], p[1].slice(0));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // 子节点\r\n            if (src.children && src.children.length > 0) {\r\n                dst.children = [];\r\n                for (let c of src.children) {\r\n                    Renderer.renderDom(module, c, dst.model, dst, key ? key : null);\r\n                }\r\n            }\r\n        }\r\n        else if (!dst.notChange) { //文本节点\r\n            if (src.expressions) {\r\n                let value = '';\r\n                src.expressions.forEach((v) => {\r\n                    if (v instanceof Expression) { //处理表达式\r\n                        let v1 = v.val(module, dst.model);\r\n                        value += v1 !== undefined ? v1 : '';\r\n                    }\r\n                    else {\r\n                        value += v;\r\n                    }\r\n                });\r\n                dst.textContent = value;\r\n                dst.staticNum = -1;\r\n            }\r\n            else {\r\n                dst.textContent = src.textContent;\r\n            }\r\n        }\r\n        //添加到dom tree\r\n        if (parent && !dst.dontAddToTree) {\r\n            parent.children.push(dst);\r\n        }\r\n        return dst;\r\n        /**\r\n         * 处理指令\r\n         * @returns     true继续执行，false不执行后续渲染代码\r\n         */\r\n        function handleDirectives() {\r\n            if (!src.directives || src.directives.length === 0) {\r\n                return true;\r\n            }\r\n            dst.staticNum = -1;\r\n            for (let d of src.directives) {\r\n                //model指令不执行\r\n                if (d.type.name === 'model') {\r\n                    continue;\r\n                }\r\n                if (!d.exec(module, dst, src)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        /**\r\n         * 处理属性（带表达式）\r\n         */\r\n        function handleProps() {\r\n            if (!src.props || src.props.size === 0) {\r\n                return;\r\n            }\r\n            for (let k of src.props) {\r\n                if (k[1] instanceof Expression) {\r\n                    dst.setProp(k[0], k[1].val(module, dst.model));\r\n                    dst.staticNum = -1;\r\n                }\r\n                else {\r\n                    dst.setProp(k[0], k[1]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 渲染为html element\r\n     * @param module \t        模块\r\n     * @param src               渲染节点\r\n     * @param parentEl \t        父html\r\n     * @param isRenderChild     是否渲染子节点\r\n     */\r\n    static renderToHtml(module, src, parentEl, isRenderChild) {\r\n        let el = module.getNode(src.key);\r\n        if (el) { //html dom节点已存在\r\n            if (src.tagName) {\r\n                if (src.props) {\r\n                    //设置属性\r\n                    for (let p of src.props) {\r\n                        if (p[1] !== undefined) {\r\n                            el.setAttribute(p[0], p[1]);\r\n                        }\r\n                    }\r\n                }\r\n                handleAssets(src, el);\r\n            }\r\n            else { //文本节点\r\n                el.textContent = src.textContent;\r\n            }\r\n        }\r\n        else {\r\n            if (src.tagName) {\r\n                el = newEl(src);\r\n            }\r\n            else {\r\n                el = newText(src);\r\n            }\r\n            //先创建子节点，再添加到html dom树，避免频繁添加\r\n            if (el && src.tagName && isRenderChild) {\r\n                genSub(el, src);\r\n            }\r\n            if (el && parentEl) {\r\n                parentEl.appendChild(el);\r\n            }\r\n        }\r\n        return el;\r\n        /**\r\n         * 新建element节点\r\n         * @param dom \t\t虚拟dom\r\n         * @returns \t\t新的html element\r\n         */\r\n        function newEl(dom) {\r\n            //style不处理\r\n            if (dom.tagName.toLowerCase() === 'style') {\r\n                return;\r\n            }\r\n            //创建element\r\n            let el = document.createElement(dom.tagName);\r\n            //保存虚拟dom\r\n            el['vdom'] = dom;\r\n            //模块容器，向目标模块设置容器\r\n            if (dom.subModuleId) {\r\n                let m = ModuleFactory.get(dom.subModuleId);\r\n                if (m) {\r\n                    m.setContainer(el, true);\r\n                }\r\n            }\r\n            //设置属性\r\n            if (dom.props) {\r\n                for (let p of dom.props) {\r\n                    if (p[1] !== undefined) {\r\n                        el.setAttribute(p[0], p[1]);\r\n                    }\r\n                }\r\n            }\r\n            //如果存储node，则不需要key\r\n            // el.setAttribute('key', dom.key);\r\n            //把el引用与key关系存放到cache中\r\n            module.saveNode(dom.key, el);\r\n            //asset\r\n            if (dom.assets && dom.assets.size > 0) {\r\n                for (let p in dom.assets) {\r\n                    el[p] = p[1];\r\n                }\r\n            }\r\n            //处理event\r\n            if (dom.events) {\r\n                EventManager.bind(module, dom);\r\n            }\r\n            return el;\r\n        }\r\n        /**\r\n         * 新建文本节点\r\n         */\r\n        function newText(dom) {\r\n            //样式表处理，如果是样式表文本，则不添加到dom树\r\n            if (CssManager.handleStyleTextDom(module, dom)) {\r\n                return;\r\n            }\r\n            let node = document.createTextNode(dom.textContent || '');\r\n            module.saveNode(dom.key, node);\r\n            return node;\r\n        }\r\n        /**\r\n         * 生成子节点\r\n         * @param pEl \t父节点\r\n         * @param vdom  虚拟dom节点\r\n         */\r\n        function genSub(pEl, vdom) {\r\n            if (vdom.children && vdom.children.length > 0) {\r\n                vdom.children.forEach(item => {\r\n                    let el1;\r\n                    if (item.tagName) {\r\n                        el1 = newEl(item);\r\n                        genSub(el1, item);\r\n                    }\r\n                    else {\r\n                        el1 = newText(item);\r\n                    }\r\n                    if (el1) {\r\n                        pEl.appendChild(el1);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        /**\r\n         * 处理assets\r\n         */\r\n        function handleAssets(dom, el) {\r\n            //处理asset\r\n            if (dom.assets) {\r\n                for (let k of dom.assets) {\r\n                    el[k[0]] = k[1];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 处理更改的dom节点\r\n     * @param module        待处理模块\r\n     * @param changeDoms    更改的dom参数数组\r\n     */\r\n    static handleChangedDoms(module, changeDoms) {\r\n        for (let item of changeDoms) {\r\n            let [n1, n2, pEl] = [\r\n                item[1] ? module.getNode(item[1].key) : null,\r\n                item[2] && typeof item[2] === 'object' ? module.getNode(item[2].key) : null,\r\n                item[3] ? module.getNode(item[3].key) : null\r\n            ];\r\n            switch (item[0]) {\r\n                case 1: //添加\r\n                    //把新dom缓存添加到旧dom缓存\r\n                    Renderer.renderToHtml(module, item[1], pEl, true);\r\n                    n1 = module.getNode(item[1].key);\r\n                    if (!n2) { //不存在添加节点或为索引号\r\n                        if (typeof item[2] === 'number' && pEl.childNodes.length - 1 > item[2]) {\r\n                            pEl.insertBefore(n1, pEl.childNodes[item[2]]);\r\n                        }\r\n                        else {\r\n                            pEl.appendChild(n1);\r\n                        }\r\n                    }\r\n                    else {\r\n                        pEl.insertBefore(n1, n2);\r\n                    }\r\n                    break;\r\n                case 2: //修改\r\n                    Renderer.renderToHtml(module, item[1], null, false);\r\n                    break;\r\n                case 3: //删除\r\n                    //清除缓存\r\n                    module.objectManager.removeSavedNode(item[1].key);\r\n                    module.keyNodeMap.delete(item[1].key);\r\n                    //从html dom树移除\r\n                    pEl.removeChild(n1);\r\n                    break;\r\n                case 4: //移动\r\n                    if (item[4]) { //相对节点后\r\n                        if (n2 && n2.nextSibling) {\r\n                            pEl.insertBefore(n1, n2.nextSibling);\r\n                        }\r\n                        else {\r\n                            pEl.appendChild(n1);\r\n                        }\r\n                    }\r\n                    else {\r\n                        pEl.insertBefore(n1, n2);\r\n                    }\r\n                    break;\r\n                default: //替换\r\n                    Renderer.renderToHtml(module, item[1], pEl, true);\r\n                    n1 = module.getNode(item[1].key);\r\n                    pEl.replaceChild(n1, n2);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * 等待渲染列表（模块名）\r\n */\r\nRenderer.waitList = [];\r\n//# sourceMappingURL=renderer.js.map","references":["D:/User_zhao/gitRepository/competition/nodom/core/module.ts","D:/User_zhao/gitRepository/competition/nodom/core/modulefactory.ts","D:/User_zhao/gitRepository/competition/nodom/core/virtualdom.ts","D:/User_zhao/gitRepository/competition/nodom/core/model.ts","D:/User_zhao/gitRepository/competition/nodom/core/expression.ts","D:/User_zhao/gitRepository/competition/nodom/core/cssmanager.ts","D:/User_zhao/gitRepository/competition/nodom/core/eventmanager.ts"],"map":"{\"version\":3,\"file\":\"renderer.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../core/renderer.ts\"],\"names\":[],\"mappings\":\"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\"}"}
