{"code":"import { DirectiveElement } from \"../core/directiveelement\";\r\nimport { DirectiveElementManager } from \"../core/directiveelementmanager\";\r\nimport { NError } from \"../core/error\";\r\nimport { NodomMessage } from \"../core/nodom\";\r\nimport { Directive } from \"../core/directive\";\r\nimport { GlobalCache } from \"../core/globalcache\";\r\n/**\r\n * module 元素\r\n */\r\nclass MODULE extends DirectiveElement {\r\n    constructor(node, module) {\r\n        super(node, module);\r\n        //类名\r\n        let clazz = node.getProp('name');\r\n        if (!clazz) {\r\n            throw new NError('itemnotempty', NodomMessage.TipWords['element'], 'MODULE', 'className');\r\n        }\r\n        node.delProp('name');\r\n        node.addDirective(new Directive('module', clazz));\r\n    }\r\n}\r\n/**\r\n * for 元素\r\n */\r\nclass FOR extends DirectiveElement {\r\n    constructor(node, module) {\r\n        super(node, module);\r\n        //条件\r\n        let cond = node.getProp('cond');\r\n        if (!cond) {\r\n            throw new NError('itemnotempty', NodomMessage.TipWords['element'], 'FOR', 'cond');\r\n        }\r\n        node.delProp('cond');\r\n        if (typeof cond === 'number') { //表达式\r\n            cond = GlobalCache.getExpression(cond);\r\n        }\r\n        node.addDirective(new Directive('repeat', cond));\r\n    }\r\n}\r\n/**\r\n * 递归元素\r\n */\r\nclass RECUR extends DirectiveElement {\r\n    constructor(node, module) {\r\n        super(node, module);\r\n        //条件\r\n        let cond = node.getProp('cond');\r\n        node.delProp('cond');\r\n        if (typeof cond === 'number') { //表达式\r\n            cond = GlobalCache.getExpression(cond);\r\n        }\r\n        node.addDirective(new Directive('recur', cond));\r\n    }\r\n}\r\n/**\r\n * IF 元素\r\n */\r\nclass IF extends DirectiveElement {\r\n    constructor(node, module) {\r\n        super(node, module);\r\n        //条件\r\n        let cond = node.getProp('cond');\r\n        if (!cond) {\r\n            throw new NError('itemnotempty', NodomMessage.TipWords['element'], 'IF', 'cond');\r\n        }\r\n        node.delProp('cond');\r\n        if (typeof cond === 'number') { //表达式\r\n            cond = GlobalCache.getExpression(cond);\r\n        }\r\n        node.addDirective(new Directive('if', cond));\r\n    }\r\n}\r\nclass ELSE extends DirectiveElement {\r\n    constructor(node, module) {\r\n        super(node, module);\r\n        node.addDirective(new Directive('else', null));\r\n    }\r\n}\r\n/**\r\n * ELSEIF 元素\r\n */\r\nclass ELSEIF extends DirectiveElement {\r\n    constructor(node, module) {\r\n        super(node, module);\r\n        //条件\r\n        let cond = node.getProp('cond');\r\n        if (!cond) {\r\n            throw new NError('itemnotempty', NodomMessage.TipWords['element'], 'ELSEIF', 'cond');\r\n        }\r\n        node.delProp('cond');\r\n        if (typeof cond === 'number') { //表达式\r\n            cond = GlobalCache.getExpression(cond);\r\n        }\r\n        node.addDirective(new Directive('elseif', cond));\r\n    }\r\n}\r\n/**\r\n * ENDIF 元素\r\n */\r\nclass ENDIF extends DirectiveElement {\r\n    constructor(node, module) {\r\n        super(node, module);\r\n        node.addDirective(new Directive('endif', null));\r\n    }\r\n}\r\n/**\r\n * 替代器\r\n */\r\nclass SLOT extends DirectiveElement {\r\n    constructor(node, module) {\r\n        super(node, module);\r\n        //条件\r\n        let cond = node.getProp('name') || 'default';\r\n        node.delProp('name');\r\n        node.addDirective(new Directive('slot', cond));\r\n    }\r\n}\r\nDirectiveElementManager.add([MODULE, FOR, IF, RECUR, ELSE, ELSEIF, ENDIF, SLOT]);\r\n//# sourceMappingURL=elementinit.js.map","references":["D:/User_zhao/gitRepository/competition/nodom/core/directiveelement.ts","D:/User_zhao/gitRepository/competition/nodom/core/directiveelementmanager.ts","D:/User_zhao/gitRepository/competition/nodom/core/error.ts","D:/User_zhao/gitRepository/competition/nodom/core/nodom.ts","D:/User_zhao/gitRepository/competition/nodom/core/virtualdom.ts","D:/User_zhao/gitRepository/competition/nodom/core/directive.ts","D:/User_zhao/gitRepository/competition/nodom/core/module.ts","D:/User_zhao/gitRepository/competition/nodom/core/globalcache.ts"],"map":"{\"version\":3,\"file\":\"elementinit.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../extend/elementinit.ts\"],\"names\":[],\"mappings\":\"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\"}"}
