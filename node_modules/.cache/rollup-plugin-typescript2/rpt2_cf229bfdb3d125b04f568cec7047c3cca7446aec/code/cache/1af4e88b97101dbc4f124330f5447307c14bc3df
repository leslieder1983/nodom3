{"code":"import { NEvent } from \"../core/event\";\r\nimport { ModuleFactory } from \"../core/modulefactory\";\r\nimport { createDirective } from \"../core/nodom\";\r\nimport { Renderer } from \"../core/renderer\";\r\nimport { Router } from \"../core/router\";\r\nimport { Util } from \"../core/util\";\r\nimport { ModelManager } from \"../core/modelmanager\";\r\nexport default (function () {\r\n    /**\r\n     * 指令类型初始化\r\n     * 每个指令类型都有一个名字、处理函数和优先级，处理函数不能用箭头函数\r\n     * 处理函数在渲染时执行，包含两个参数 module(模块)、dom(目标虚拟dom)、src(源虚拟dom)\r\n     * 处理函数的this指向指令\r\n     * 处理函数的返回值 true 表示继续，false 表示后续指令不再执行\r\n     */\r\n    /**\r\n     * module 指令\r\n     * 用于指定该元素为模块容器，表示子模块\r\n     * 用法 x-module='模块类名'\r\n     */\r\n    createDirective('module', function (module, dom, src) {\r\n        let m;\r\n        //存在moduleId，表示已经渲染过，不渲染\r\n        let mid = dom.getParam(module, 'moduleId');\r\n        let handle = true;\r\n        if (mid) {\r\n            m = ModuleFactory.get(mid);\r\n            handle = !dom.getProp('renderOnce');\r\n        }\r\n        else {\r\n            m = ModuleFactory.get(this.value);\r\n            if (!m) {\r\n                return true;\r\n            }\r\n            mid = m.id;\r\n            //保留modelId\r\n            dom.setParam(module, 'moduleId', mid);\r\n            module.addChild(m);\r\n            //共享当前dom的model给子模块\r\n            if (dom.hasProp('useDomModel')) {\r\n                m.model = dom.model;\r\n                //绑定model到子模块，共享update,watch方法\r\n                ModelManager.bindToModule(m.model, m);\r\n                dom.delProp('useDomModel');\r\n            }\r\n        }\r\n        //保存到dom上，提升渲染性能\r\n        dom.subModuleId = mid;\r\n        if (handle) { //需要处理\r\n            //设置props，如果改变了props，启动渲染\r\n            let o = {};\r\n            if (dom.props) {\r\n                for (let p of dom.props) {\r\n                    if (p[0][0] === '$') { //数据\r\n                        if (!o.$data) {\r\n                            o.$data = {};\r\n                        }\r\n                        o.$data[p[0].substr(1)] = p[1];\r\n                        //删除属性\r\n                        dom.delProp(p[0]);\r\n                    }\r\n                    else {\r\n                        o[p[0]] = p[1];\r\n                    }\r\n                }\r\n            }\r\n            //传递给模块\r\n            m.setProps(o);\r\n        }\r\n        return true;\r\n    }, 8);\r\n    /**\r\n     *  model指令\r\n     */\r\n    createDirective('model', function (module, dom, src) {\r\n        let model = dom.model.$get(this.value);\r\n        if (model) {\r\n            dom.model = model;\r\n        }\r\n        return true;\r\n    }, 1);\r\n    /**\r\n     * 指令名 repeat\r\n     * 描述：重复指令\r\n     */\r\n    createDirective('repeat', function (module, dom, src) {\r\n        let rows = this.value;\r\n        console.log(rows);\r\n        // 无数据，不渲染\r\n        if (!Util.isArray(rows) || rows.length === 0) {\r\n            return false;\r\n        }\r\n        //索引名\r\n        const idxName = src.getProp('$index');\r\n        const parent = dom.parent;\r\n        //禁用该指令\r\n        this.disabled = true;\r\n        for (let i = 0; i < rows.length; i++) {\r\n            if (idxName) {\r\n                rows[i][idxName] = i;\r\n            }\r\n            //渲染一次-1，所以需要+1\r\n            src.staticNum++;\r\n            let d = Renderer.renderDom(module, src, rows[i], parent, rows[i].$key);\r\n            //删除$index属性\r\n            if (idxName) {\r\n                d.delProp('$index');\r\n            }\r\n        }\r\n        //启用该指令\r\n        this.disabled = false;\r\n        return false;\r\n    }, 2);\r\n    /**\r\n     * 递归指令\r\n     * 作用：在dom内部递归，用于具有相同数据结构的节点递归生成\r\n     * 递归指令不允许嵌套\r\n     * name表示递归名字，必须与内部的recur标签的ref保持一致，名字默认为default\r\n     * 典型模版\r\n     * ```\r\n     * <recur name='r1'>\r\n     *      <div>...</div>\r\n     *      <p>...</p>\r\n     *      <recur ref='r1' />\r\n     * </recur>\r\n     * ```\r\n     */\r\n    createDirective('recur', function (module, dom, src) {\r\n        //递归节点存放容器\r\n        if (dom.hasProp('ref')) {\r\n            //如果出现在repeat中，src为单例，需要在使用前清空子节点，避免沿用上次的子节点\r\n            src.children = [];\r\n            //递归存储名\r\n            const name = '$recurs.' + (dom.getProp('ref') || 'default');\r\n            let node = module.objectManager.get(name);\r\n            if (!node) {\r\n                return true;\r\n            }\r\n            let model = dom.model;\r\n            let cond = node.getDirective('recur');\r\n            let m = model[cond.value];\r\n            //不存在子层数组，不再递归\r\n            if (!m) {\r\n                return true;\r\n            }\r\n            //克隆，后续可以继续用\r\n            let node1 = node.clone();\r\n            let key;\r\n            if (!Array.isArray(m)) { //recur子节点不为数组，依赖子层数据\r\n                node1.model = m;\r\n                key = m.$key;\r\n                Util.setNodeKey(node1, key, true);\r\n            }\r\n            else {\r\n                key = dom.model.$key;\r\n            }\r\n            src.children = [node1];\r\n        }\r\n        else { //递归节点\r\n            let data = dom.model[this.value];\r\n            if (!data) {\r\n                return true;\r\n            }\r\n            //递归名，默认default\r\n            const name = '$recurs.' + (dom.getProp('name') || 'default');\r\n            if (!module.objectManager.get(name)) {\r\n                module.objectManager.set(name, src.clone());\r\n            }\r\n        }\r\n        return true;\r\n    }, 2);\r\n    /**\r\n     * 指令名 if\r\n     * 描述：条件指令\r\n     */\r\n    createDirective('if', function (module, dom, src) {\r\n        dom.parent.setParam(module, '$if', this.value);\r\n        return this.value;\r\n    }, 5);\r\n    /**\r\n     * 指令名 else\r\n     * 描述：else指令\r\n     */\r\n    createDirective('else', function (module, dom, src) {\r\n        //如果前面的if/elseif值为true，则隐藏，否则显示\r\n        return dom.parent.getParam(module, '$if') === false;\r\n    }, 5);\r\n    /**\r\n     * elseif 指令\r\n     */\r\n    createDirective('elseif', function (module, dom, src) {\r\n        let v = dom.parent.getParam(module, '$if');\r\n        if (v === true) {\r\n            return false;\r\n        }\r\n        else {\r\n            if (!this.value) {\r\n                return false;\r\n            }\r\n            else {\r\n                dom.parent.setParam(module, '$if', true);\r\n            }\r\n        }\r\n        return true;\r\n    }, 5);\r\n    /**\r\n     * endif 指令\r\n     */\r\n    createDirective('endif', function (module, dom, src) {\r\n        dom.parent.removeParam(module, '$if');\r\n        return true;\r\n    }, 5);\r\n    /**\r\n     * 指令名 show\r\n     * 描述：显示指令\r\n     */\r\n    createDirective('show', function (module, dom, src) {\r\n        return this.value;\r\n    }, 5);\r\n    /**\r\n     * 指令名 field\r\n     * 描述：字段指令\r\n     */\r\n    createDirective('field', function (module, dom, src) {\r\n        const me = this;\r\n        const type = dom.getProp('type') || 'text';\r\n        const tgname = dom.tagName.toLowerCase();\r\n        const model = dom.model;\r\n        if (!model) {\r\n            return true;\r\n        }\r\n        let dataValue = model.$get(this.value);\r\n        if (type === 'radio') {\r\n            let value = dom.getProp('value');\r\n            if (dataValue == value) {\r\n                dom.setProp('checked', true);\r\n                dom.setAsset('checked', 'checked');\r\n            }\r\n            else {\r\n                dom.setAsset('checked', false);\r\n                dom.delProp('checked');\r\n            }\r\n        }\r\n        else if (type === 'checkbox') {\r\n            //设置状态和value\r\n            let yv = dom.getProp('yes-value');\r\n            //当前值为yes-value\r\n            if (dataValue == yv) {\r\n                dom.setProp('value', yv);\r\n                dom.setAsset('checked', 'checked');\r\n            }\r\n            else { //当前值为no-value\r\n                dom.setProp('value', dom.getProp('no-value'));\r\n                dom.setAsset('checked', false);\r\n            }\r\n        }\r\n        else if (tgname === 'select') { //下拉框\r\n            dom.setAsset('value', dataValue);\r\n            dom.setProp('value', dataValue);\r\n        }\r\n        else {\r\n            let v = (dataValue !== undefined && dataValue !== null) ? dataValue : '';\r\n            dom.setAsset('value', v);\r\n            dom.setProp('value', v);\r\n        }\r\n        //初始化\r\n        if (!this.getParam(module, dom, 'inited')) {\r\n            dom.addEvent(new NEvent('change', function (model, dom) {\r\n                let el = module.getNode(dom.key);\r\n                if (!el) {\r\n                    return;\r\n                }\r\n                let type = dom.getProp('type');\r\n                let field = me.value;\r\n                let v = el.value;\r\n                //根据选中状态设置checkbox的value\r\n                if (type === 'checkbox') {\r\n                    if (dom.getProp('yes-value') == v) {\r\n                        v = dom.getProp('no-value');\r\n                    }\r\n                    else {\r\n                        v = dom.getProp('yes-value');\r\n                    }\r\n                }\r\n                else if (type === 'radio') {\r\n                    if (!el.checked) {\r\n                        v = undefined;\r\n                    }\r\n                }\r\n                //修改字段值,需要处理.运算符\r\n                let temp = this;\r\n                let arr = field.split('.');\r\n                if (arr.length === 1) {\r\n                    model[field] = v;\r\n                }\r\n                else {\r\n                    field = arr.pop();\r\n                    for (let i = 0; i < arr.length; i++) {\r\n                        temp = temp[arr[i]];\r\n                    }\r\n                    temp[field] = v;\r\n                }\r\n                //修改value值，该节点不重新渲染\r\n                if (type !== 'radio') {\r\n                    dom.setProp('value', v);\r\n                    el.value = v;\r\n                }\r\n            }));\r\n            this.setParam(module, dom, 'inited', true);\r\n        }\r\n        return true;\r\n    }, 10);\r\n    /**\r\n     * route指令\r\n     */\r\n    createDirective('route', function (module, dom, src) {\r\n        if (!this.value) {\r\n            return true;\r\n        }\r\n        //a标签需要设置href\r\n        if (dom.tagName.toLowerCase() === 'a') {\r\n            dom.setProp('href', 'javascript:void(0)');\r\n        }\r\n        dom.setProp('path', this.value);\r\n        //有激活属性\r\n        if (dom.hasProp('active')) {\r\n            let acName = dom.getProp('active');\r\n            dom.delProp('active');\r\n            //active 转expression\r\n            Router.addActiveField(module, this.value, dom.model, acName);\r\n            if (this.value.startsWith(Router.currentPath) && dom.model[acName]) {\r\n                Router.go(this.value);\r\n            }\r\n        }\r\n        //添加click事件,避免重复创建事件对象，创建后缓存\r\n        let event = module.objectManager.get('$routeClickEvent');\r\n        if (!event) {\r\n            event = new NEvent('click', (model, dom, e) => {\r\n                let path = dom.getProp('path');\r\n                if (!path) {\r\n                    let dir = dom.getDirective('route');\r\n                    path = dir.value;\r\n                }\r\n                if (Util.isEmpty(path)) {\r\n                    return;\r\n                }\r\n                Router.go(path);\r\n            });\r\n            module.objectManager.set('$routeClickEvent', event);\r\n        }\r\n        dom.addEvent(event);\r\n        return true;\r\n    });\r\n    /**\r\n     * 增加router指令\r\n     */\r\n    createDirective('router', function (module, dom, src) {\r\n        Router.routerKeyMap.set(module.id, dom.key);\r\n        return true;\r\n    });\r\n    /**\r\n     * 插头指令\r\n     * 用于模块中，可实现同名替换\r\n     */\r\n    createDirective('slot', function (module, dom, src) {\r\n        this.value = this.value || 'default';\r\n        let mid = dom.parent.subModuleId;\r\n        console.log(mid, this.value);\r\n        //父dom有module指令，表示为替代节点，替换子模块中的对应的slot节点；否则为子模块定义slot节点\r\n        if (mid) {\r\n            let m = ModuleFactory.get(mid);\r\n            if (m) {\r\n                //缓存当前替换节点\r\n                m.objectManager.set('$slots.' + this.value, { dom: src.clone(), model: dom.model });\r\n            }\r\n            //此次不继续渲染，子节点在实际模块中渲染\r\n            return false;\r\n        }\r\n        else { //源slot节点\r\n            //获取替换节点进行替换\r\n            let cfg = module.objectManager.get('$slots.' + this.value);\r\n            console.log(cfg, 'cfg');\r\n            if (cfg) {\r\n                let rdom = cfg.dom;\r\n                //避免key重复，更新key\r\n                for (let d of rdom.children) {\r\n                    Util.setNodeKey(d, dom.key, true);\r\n                }\r\n                //更改渲染子节点\r\n                src.children = rdom.children;\r\n                //非内部渲染,更改model\r\n                if (!src.hasProp('innerRender')) {\r\n                    for (let c of src.children) {\r\n                        c.model = cfg.model;\r\n                    }\r\n                }\r\n                module.objectManager.remove('$slots.' + this.value);\r\n            }\r\n        }\r\n        return true;\r\n    }, 5);\r\n}());\r\n//# sourceMappingURL=directiveinit.js.map","references":["D:/User_zhao/gitRepository/competition/nodom/core/directive.ts","D:/User_zhao/gitRepository/competition/nodom/core/virtualdom.ts","D:/User_zhao/gitRepository/competition/nodom/core/event.ts","D:/User_zhao/gitRepository/competition/nodom/core/model.ts","D:/User_zhao/gitRepository/competition/nodom/core/module.ts","D:/User_zhao/gitRepository/competition/nodom/core/modulefactory.ts","D:/User_zhao/gitRepository/competition/nodom/core/nodom.ts","D:/User_zhao/gitRepository/competition/nodom/core/renderer.ts","D:/User_zhao/gitRepository/competition/nodom/core/router.ts","D:/User_zhao/gitRepository/competition/nodom/core/util.ts","D:/User_zhao/gitRepository/competition/nodom/core/modelmanager.ts"],"map":"{\"version\":3,\"file\":\"directiveinit.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../extend/directiveinit.ts\"],\"names\":[],\"mappings\":\"AAEA,OAAO,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAGvC,OAAO,EAAE,aAAa,EAAE,MAAM,uBAAuB,CAAC;AACtD,OAAO,EAAE,eAAe,EAAC,MAAM,eAAe,CAAC;AAC/C,OAAO,EAAE,QAAQ,EAAE,MAAM,kBAAkB,CAAC;AAC5C,OAAO,EAAE,MAAM,EAAE,MAAM,gBAAgB,CAAC;AACxC,OAAO,EAAE,IAAI,EAAE,MAAM,cAAc,CAAC;AACpC,OAAO,EAAE,YAAY,EAAE,MAAM,sBAAsB,CAAC;AAEpD,eAAe,CAAC;IAEZ;;;;;;OAMG;IAEH;;;;OAIG;IACH,eAAe,CACX,QAAQ,EACR,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,IAAI,CAAS,CAAC;QACd,wBAAwB;QACxB,IAAI,GAAG,GAAG,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAC,UAAU,CAAC,CAAC;QAC1C,IAAI,MAAM,GAAW,IAAI,CAAC;QAC1B,IAAI,GAAG,EAAE;YACL,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAC3B,MAAM,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;SACvC;aAAM;YACH,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAClC,IAAI,CAAC,CAAC,EAAE;gBACJ,OAAO,IAAI,CAAC;aACf;YACD,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;YACX,WAAW;YACX,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAC,UAAU,EAAC,GAAG,CAAC,CAAC;YACpC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACnB,mBAAmB;YACnB,IAAG,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,EAAC;gBAC1B,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;gBACpB,8BAA8B;gBAC9B,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;gBACrC,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;aAC9B;SACJ;QACD,gBAAgB;QAChB,GAAG,CAAC,WAAW,GAAG,GAAG,CAAC;QACtB,IAAG,MAAM,EAAC,EAAE,MAAM;YACd,yBAAyB;YACzB,IAAI,CAAC,GAAO,EAAE,CAAC;YACf,IAAG,GAAG,CAAC,KAAK,EAAC;gBACT,KAAI,IAAI,CAAC,IAAI,GAAG,CAAC,KAAK,EAAC;oBACnB,IAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAC,EAAE,IAAI;wBACrB,IAAG,CAAC,CAAC,CAAC,KAAK,EAAC;4BACR,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;yBAChB;wBACD,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC/B,MAAM;wBACN,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACrB;yBAAI;wBACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;qBAClB;iBACJ;aACJ;YACD,OAAO;YACP,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SACjB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;OAEG;IACH,eAAe,CACX,OAAO,EACP,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,IAAI,KAAK,GAAU,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9C,IAAI,KAAK,EAAE;YACP,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC;SACrB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;;OAGG;IACH,eAAe,CACX,QAAQ,EACR,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAClB,UAAU;QACV,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;YAC1C,OAAO,KAAK,CAAC;SAChB;QACD,KAAK;QACL,MAAM,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACtC,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QAC1B,OAAO;QACP,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAG,OAAO,EAAC;gBACP,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;aACxB;YACD,eAAe;YACf,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,IAAI,CAAC,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAC,GAAG,EAAC,IAAI,CAAC,CAAC,CAAC,EAAC,MAAM,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACnE,YAAY;YACZ,IAAG,OAAO,EAAC;gBACP,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;aACvB;SACJ;QACD,OAAO;QACP,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,OAAO,KAAK,CAAC;IACjB,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;;;;;;;;;;;;OAaG;IACH,eAAe,CACX,OAAO,EACP,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,UAAU;QACV,IAAG,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,EAAC;YAClB,4CAA4C;YAC5C,GAAG,CAAC,QAAQ,GAAG,EAAE,CAAC;YAClB,OAAO;YACP,MAAM,IAAI,GAAG,UAAU,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,SAAS,CAAC,CAAC;YAC5D,IAAI,IAAI,GAAG,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC1C,IAAG,CAAC,IAAI,EAAC;gBACL,OAAO,IAAI,CAAC;aACf;YACD,IAAI,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;YACtB,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YACtC,IAAI,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC1B,cAAc;YACd,IAAG,CAAC,CAAC,EAAC;gBACF,OAAO,IAAI,CAAC;aACf;YACD,YAAY;YACZ,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;YACzB,IAAI,GAAU,CAAC;YACf,IAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAC,EAAG,qBAAqB;gBACzC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;gBAChB,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC;gBACb,IAAI,CAAC,UAAU,CAAC,KAAK,EAAC,GAAG,EAAC,IAAI,CAAC,CAAC;aACnC;iBAAI;gBACD,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAA;aACvB;YAED,GAAG,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,CAAC;SAC1B;aAAK,EAAE,MAAM;YACV,IAAI,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACjC,IAAG,CAAC,IAAI,EAAC;gBACL,OAAO,IAAI,CAAC;aACf;YACD,eAAe;YACf,MAAM,IAAI,GAAG,UAAU,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,SAAS,CAAC,CAAC;YAC7D,IAAG,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC;gBAC/B,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,EAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC;aAC9C;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;;OAGG;IACH,eAAe,CAAC,IAAI,EAChB,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAC,KAAK,EAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;;OAGG;IACH,eAAe,CACX,MAAM,EACN,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,+BAA+B;QAC/B,OAAO,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAC,KAAK,CAAC,KAAK,KAAK,CAAC;IACvD,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;OAEG;IACH,eAAe,CAAC,QAAQ,EACpB,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,IAAI,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAC,KAAK,CAAC,CAAC;QAC1C,IAAG,CAAC,KAAK,IAAI,EAAC;YACV,OAAO,KAAK,CAAC;SAChB;aAAI;YACD,IAAG,CAAC,IAAI,CAAC,KAAK,EAAC;gBACX,OAAO,KAAK,CAAC;aAChB;iBAAI;gBACD,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAC,KAAK,EAAC,IAAI,CAAC,CAAC;aAC1C;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;OAEG;IACF,eAAe,CACX,OAAO,EACR,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAC,KAAK,CAAC,CAAC;QACrC,OAAO,IAAI,CAAC;IAChB,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;;OAGG;IACH,eAAe,CACX,MAAM,EACN,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC,EACD,CAAC,CACJ,CAAC;IAEF;;;OAGG;IACH,eAAe,CAAC,OAAO,EACnB,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,MAAM,EAAE,GAAG,IAAI,CAAC;QAChB,MAAM,IAAI,GAAW,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC;QACnD,MAAM,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;QACzC,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;QAExB,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,IAAI,CAAC;SACf;QAED,IAAI,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEvC,IAAI,IAAI,KAAK,OAAO,EAAE;YAClB,IAAI,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACjC,IAAI,SAAS,IAAI,KAAK,EAAE;gBACpB,GAAG,CAAC,OAAO,CAAC,SAAS,EAAC,IAAI,CAAC,CAAC;gBAC5B,GAAG,CAAC,QAAQ,CAAC,SAAS,EAAC,SAAS,CAAC,CAAC;aACrC;iBAAM;gBACH,GAAG,CAAC,QAAQ,CAAC,SAAS,EAAC,KAAK,CAAC,CAAC;gBAC9B,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;aAC1B;SACJ;aAAM,IAAI,IAAI,KAAK,UAAU,EAAE;YAC5B,YAAY;YACZ,IAAI,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YAClC,eAAe;YACf,IAAI,SAAS,IAAI,EAAE,EAAE;gBACjB,GAAG,CAAC,OAAO,CAAC,OAAO,EAAC,EAAE,CAAC,CAAC;gBACxB,GAAG,CAAC,QAAQ,CAAC,SAAS,EAAC,SAAS,CAAC,CAAC;aACrC;iBAAM,EAAE,cAAc;gBACnB,GAAG,CAAC,OAAO,CAAC,OAAO,EAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC7C,GAAG,CAAC,QAAQ,CAAC,SAAS,EAAC,KAAK,CAAC,CAAC;aACjC;SACJ;aAAM,IAAI,MAAM,KAAK,QAAQ,EAAE,EAAE,KAAK;YACnC,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAC,SAAS,CAAC,CAAC;YAChC,GAAG,CAAC,OAAO,CAAC,OAAO,EAAC,SAAS,CAAC,CAAC;SAClC;aAAM;YACH,IAAI,CAAC,GAAG,CAAC,SAAS,KAAG,SAAS,IAAI,SAAS,KAAG,IAAI,CAAC,CAAA,CAAC,CAAA,SAAS,CAAA,CAAC,CAAA,EAAE,CAAC;YACjE,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAC,CAAC,CAAC,CAAC;YACxB,GAAG,CAAC,OAAO,CAAC,OAAO,EAAC,CAAC,CAAC,CAAC;SAC1B;QAED,KAAK;QACL,IAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAC,GAAG,EAAC,QAAQ,CAAC,EAAC;YACnC,GAAG,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,QAAQ,EAC5B,UAAS,KAAK,EAAC,GAAG;gBACd,IAAI,EAAE,GAAQ,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACtC,IAAI,CAAC,EAAE,EAAE;oBACL,OAAO;iBACV;gBACD,IAAI,IAAI,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;gBAC/B,IAAI,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;gBACrB,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC;gBACjB,wBAAwB;gBACxB,IAAI,IAAI,KAAK,UAAU,EAAE;oBACrB,IAAI,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE;wBAC/B,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;qBAC/B;yBAAM;wBACH,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;qBAChC;iBACJ;qBAAM,IAAI,IAAI,KAAK,OAAO,EAAE;oBACzB,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE;wBACb,CAAC,GAAG,SAAS,CAAC;qBACjB;iBACJ;gBAED,gBAAgB;gBAChB,IAAI,IAAI,GAAG,IAAI,CAAC;gBAChB,IAAI,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;gBAC1B,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,EAAE;oBAClB,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;iBACpB;qBAAM;oBACH,KAAK,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC;oBAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBACjC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;qBACvB;oBACD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;iBACnB;gBACD,mBAAmB;gBACnB,IAAI,IAAI,KAAK,OAAO,EAAE;oBAClB,GAAG,CAAC,OAAO,CAAC,OAAO,EAAC,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC;iBAChB;YACL,CAAC,CACJ,CAAC,CAAC;YACH,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAC,GAAG,EAAC,QAAQ,EAAC,IAAI,CAAC,CAAC;SAC3C;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,EACD,EAAE,CACL,CAAC;IAEF;;OAEG;IACH,eAAe,CAAC,OAAO,EACnB,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,IAAG,CAAC,IAAI,CAAC,KAAK,EAAC;YACX,OAAO,IAAI,CAAC;SACf;QACD,aAAa;QACb,IAAI,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,KAAK,GAAG,EAAE;YACnC,GAAG,CAAC,OAAO,CAAC,MAAM,EAAC,oBAAoB,CAAC,CAAC;SAC5C;QACD,GAAG,CAAC,OAAO,CAAC,MAAM,EAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/B,OAAO;QACP,IAAI,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YACvB,IAAI,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YACnC,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YACtB,oBAAoB;YACpB,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;YAC7D,IAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,EAAC;gBAC9D,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACzB;SACJ;QAED,4BAA4B;QAC5B,IAAI,KAAK,GAAU,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QAChE,IAAG,CAAC,KAAK,EAAC;YACN,KAAK,GAAG,IAAI,MAAM,CAAC,OAAO,EACtB,CAAC,KAAK,EAAC,GAAG,EAAE,CAAC,EAAE,EAAE;gBACb,IAAI,IAAI,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;gBAC/B,IAAI,CAAC,IAAI,EAAE;oBACP,IAAI,GAAG,GAAc,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;oBAC/C,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC;iBACpB;gBACD,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;oBACpB,OAAO;iBACV;gBACD,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;YACpB,CAAC,CACJ,CAAC;YACF,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,kBAAkB,EAAC,KAAK,CAAC,CAAC;SACtD;QACD,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACpB,OAAO,IAAI,CAAC;IAChB,CAAC,CACJ,CAAC;IAEF;;OAEG;IACH,eAAe,CAAC,QAAQ,EACpB,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;QAC5C,OAAO,IAAI,CAAC;IAChB,CAAC,CACJ,CAAC;IAEF;;;OAGG;IACH,eAAe,CAAC,MAAM,EAClB,UAAS,MAAa,EAAC,GAAc,EAAC,GAAc;QAChD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,SAAS,CAAC;QACrC,IAAI,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC;QACjC,OAAO,CAAC,GAAG,CAAC,GAAG,EAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE5B,uDAAuD;QACvD,IAAG,GAAG,EAAC;YACH,IAAI,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAC/B,IAAG,CAAC,EAAC;gBACD,UAAU;gBACV,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,EAAC,EAAC,GAAG,EAAC,GAAG,CAAC,KAAK,EAAE,EAAC,KAAK,EAAC,GAAG,CAAC,KAAK,EAAC,CAAC,CAAC;aACjF;YACD,qBAAqB;YACrB,OAAO,KAAK,CAAC;SAChB;aAAI,EAAE,SAAS;YACZ,YAAY;YACZ,IAAI,GAAG,GAAG,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;YAC3D,OAAO,CAAC,GAAG,CAAC,GAAG,EAAC,KAAK,CAAC,CAAC;YAEvB,IAAG,GAAG,EAAC;gBACH,IAAI,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC;gBACnB,eAAe;gBACf,KAAI,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAC;oBACvB,IAAI,CAAC,UAAU,CAAC,CAAC,EAAC,GAAG,CAAC,GAAG,EAAC,IAAI,CAAC,CAAC;iBACnC;gBACD,SAAS;gBACT,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;gBAC7B,eAAe;gBACf,IAAG,CAAC,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,EAAC;oBAC3B,KAAI,IAAI,CAAC,IAAI,GAAG,CAAC,QAAQ,EAAC;wBACtB,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;qBACvB;iBACJ;gBACD,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;aACvD;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,EACD,CAAC,CACJ,CAAC;AACN,CAAC,EAAE,CAAC,CAAC\"}"}
